import{_ as se}from"./nuxt-img.DEu7HzvA.js";import{m as U,n as L,q as c,s as re,_ as Q,v as x,x as ue,y as I,g as R,z as X,A as Y,B as T,C as ce,D as me,E as ve,G as Z,H as O,o as u,c as v,a as r,I as ge,J as A,K as w,b as h,k as y,L as pe,M as fe,N as ye,O as he,P as be,Q as _e,l as Ie,R as G,h as n,t as S,S as E,T as J,F as Ce,r as ze,w as D,U as K,i as ke,V as Se,p as Be,f as Oe,j as $e,W as we}from"./entry.DRT713VI.js";import{u as Ne}from"./asyncData.DewpCpcH.js";import{u as N}from"./index.CEZAwSmr.js";const Te={wrapper:{horizontal:"inline-flex -space-x-px",vertical:"inline-flex flex-col -space-y-px"},rounded:"rounded-md",shadow:"shadow-sm",orientation:{"rounded-none":{horizontal:{start:"rounded-s-none",end:"rounded-e-none"},vertical:{start:"rounded-t-none",end:"rounded-b-none"}},"rounded-sm":{horizontal:{start:"rounded-s-sm",end:"rounded-e-sm"},vertical:{start:"rounded-t-sm",end:"rounded-b-sm"}},rounded:{horizontal:{start:"rounded-s",end:"rounded-e"},vertical:{start:"rounded-t",end:"rounded-b"}},"rounded-md":{horizontal:{start:"rounded-s-md",end:"rounded-e-md"},vertical:{start:"rounded-t-md",end:"rounded-b-md"}},"rounded-lg":{horizontal:{start:"rounded-s-lg",end:"rounded-e-lg"},vertical:{start:"rounded-t-lg",end:"rounded-b-lg"}},"rounded-xl":{horizontal:{start:"rounded-s-xl",end:"rounded-e-xl"},vertical:{start:"rounded-t-xl",end:"rounded-b-xl"}},"rounded-2xl":{horizontal:{start:"rounded-s-2xl",end:"rounded-e-2xl"},vertical:{start:"rounded-t-2xl",end:"rounded-b-2xl"}},"rounded-3xl":{horizontal:{start:"rounded-s-3xl",end:"rounded-e-3xl"},vertical:{start:"rounded-t-3xl",end:"rounded-b-3xl"}},"rounded-full":{horizontal:{start:"rounded-s-full",end:"rounded-e-full"},vertical:{start:"rounded-t-full",end:"rounded-b-full"}}}},je=(e,a)=>{const i=U("form-events",void 0),t=U("form-group",void 0),d=U("form-inputs",void 0);t&&(e!=null&&e.id&&(t.inputId.value=e==null?void 0:e.id),d&&(d.value[t.name.value]=t.inputId.value));const b=L(!1);function g(l,p){i&&i.emit({type:l,path:p})}function m(){g("blur",t==null?void 0:t.name.value),b.value=!0}function B(){g("change",t==null?void 0:t.name.value)}const o=re(()=>{(b.value||t!=null&&t.eagerValidation.value)&&g("input",t==null?void 0:t.name.value)},300);return{inputId:c(()=>(e==null?void 0:e.id)??(t==null?void 0:t.inputId.value)),name:c(()=>(e==null?void 0:e.name)??(t==null?void 0:t.name.value)),size:c(()=>{var p;const l=a.size[t==null?void 0:t.size.value]?t==null?void 0:t.size.value:null;return(e==null?void 0:e.size)??l??((p=a==null?void 0:a.default)==null?void 0:p.size)}),color:c(()=>{var l;return(l=t==null?void 0:t.error)!=null&&l.value?"red":e==null?void 0:e.color}),emitFormBlur:m,emitFormInput:o,emitFormChange:B}},_=x(I.ui.strategy,I.ui.input,ue),Me=R({components:{UIcon:X},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>_.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(_.size).includes(e)}},color:{type:String,default:()=>_.default.color,validator(e){return[...I.ui.colors,...Object.keys(_.color)].includes(e)}},variant:{type:String,default:()=>_.default.variant,validator(e){return[...Object.keys(_.variant),...Object.values(_.color).flatMap(a=>Object.keys(a))].includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur"],setup(e,{emit:a,slots:i}){const{ui:t,attrs:d}=Y("input",T(e,"ui"),_,T(e,"class")),{size:b,rounded:g}=ce({ui:t,props:e}),{emitFormBlur:m,emitFormInput:B,size:o,color:l,inputId:p,name:V}=je(e,_),f=c(()=>b.value||o.value),C=L(me({},e.modelModifiers,{trim:!1,lazy:!1,number:!1})),j=L(null),M=()=>{var s;e.autofocus&&((s=j.value)==null||s.focus())},z=s=>{C.value.trim&&(s=s.trim()),(C.value.number||e.type==="number")&&(s=pe(s)),a("update:modelValue",s),B()},k=s=>{C.value.lazy||z(s.target.value)},P=s=>{const $=s.target.value;C.value.lazy&&z($),C.value.trim&&(s.target.value=$.trim())},ee=s=>{m(),a("blur",s)};ve(()=>{setTimeout(()=>{M()},e.autofocusDelay)});const te=c(()=>{var $,H;const s=((H=($=t.value.color)==null?void 0:$[l.value])==null?void 0:H[e.variant])||t.value.variant[e.variant];return Z(O(t.value.base,t.value.form,g.value,t.value.placeholder,e.type==="file"&&[t.value.file.base,t.value.file.padding[f.value]],t.value.size[f.value],e.padded?t.value.padding[f.value]:"p-0",s==null?void 0:s.replaceAll("{color}",l.value),(F.value||i.leading)&&t.value.leading.padding[f.value],(q.value||i.trailing)&&t.value.trailing.padding[f.value]),e.inputClass)}),F=c(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),q=c(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),ne=c(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),ae=c(()=>e.loading&&!F.value?e.loadingIcon:e.trailingIcon||e.icon),oe=c(()=>O(t.value.icon.leading.wrapper,t.value.icon.leading.pointer,t.value.icon.leading.padding[f.value])),le=c(()=>O(t.value.icon.base,l.value&&I.ui.colors.includes(l.value)&&t.value.icon.color.replaceAll("{color}",l.value),t.value.icon.size[f.value],e.loading&&t.value.icon.loading)),ie=c(()=>O(t.value.icon.trailing.wrapper,t.value.icon.trailing.pointer,t.value.icon.trailing.padding[f.value])),de=c(()=>O(t.value.icon.base,l.value&&I.ui.colors.includes(l.value)&&t.value.icon.color.replaceAll("{color}",l.value),t.value.icon.size[f.value],e.loading&&!F.value&&t.value.icon.loading));return{ui:t,attrs:d,name:V,inputId:p,input:j,isLeading:F,isTrailing:q,inputClass:te,leadingIconName:ne,leadingIconClass:le,leadingWrapperIconClass:oe,trailingIconName:ae,trailingIconClass:de,trailingWrapperIconClass:ie,onInput:k,onChange:P,onBlur:ee}}}),Fe=["id","name","value","type","required","placeholder","disabled"];function Le(e,a,i,t,d,b){const g=X;return u(),v("div",{class:w(e.ui.wrapper)},[r("input",ge({id:e.inputId,ref:"input",name:e.name,value:e.modelValue,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass},e.attrs,{onInput:a[0]||(a[0]=(...m)=>e.onInput&&e.onInput(...m)),onBlur:a[1]||(a[1]=(...m)=>e.onBlur&&e.onBlur(...m)),onChange:a[2]||(a[2]=(...m)=>e.onChange&&e.onChange(...m))}),null,16,Fe),A(e.$slots,"default"),e.isLeading&&e.leadingIconName||e.$slots.leading?(u(),v("span",{key:0,class:w(e.leadingWrapperIconClass)},[A(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[h(g,{name:e.leadingIconName,class:w(e.leadingIconClass)},null,8,["name","class"])])],2)):y("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(u(),v("span",{key:1,class:w(e.trailingWrapperIconClass)},[A(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[h(g,{name:e.trailingIconName,class:w(e.trailingIconClass)},null,8,["name","class"])])],2)):y("",!0)],2)}const Ve=Q(Me,[["render",Le]]),Ue=x(I.ui.strategy,I.ui.button,fe),Ae=x(I.ui.strategy,I.ui.buttonGroup,Te),De=R({name:"ButtonGroup",inheritAttrs:!1,props:{size:{type:String,default:null,validator(e){return Object.keys(Ue.size).includes(e)}},orientation:{type:String,default:"horizontal",validator(e){return["horizontal","vertical"].includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e,{slots:a}){const{ui:i,attrs:t}=Y("buttonGroup",T(e,"ui"),Ae),d=c(()=>be(a)),b=c(()=>Z(O(i.value.wrapper[e.orientation],i.value.rounded,i.value.shadow),e.class)),g=c(()=>i.value.orientation[i.value.rounded][e.orientation]);return ye({orientation:T(e,"orientation"),size:T(e,"size"),ui:i,rounded:g}),()=>he("div",{class:b.value,...t.value},d.value)}}),W=e=>(Be("data-v-ebc5756e"),e=e(),Oe(),e),xe={class:"product-page-container"},Re={key:0,class:"product-container"},We={class:"product-img"},qe={class:"product-info-container"},He={class:"product-name-container"},Ee={class:"product-noted-container"},Je=["innerHTML"],Ke={key:0,class:"product-price-container"},Qe={key:0},Xe={key:0},Ye={key:1},Ze={key:2},Ge={key:1},Pe={key:0},et={key:2},tt={key:1,class:"product-option-container"},nt={class:"count-container"},at={class:"add-to-cart-container"},ot={class:"product-description-container"},lt=W(()=>r("span",{class:"back-link"},"< 返回首頁",-1)),it=["innerHTML"],dt={key:1},st=W(()=>r("h1",{class:"text-center w-full text-3xl"},"Loading...",-1)),rt={class:"product-description-container"},ut=W(()=>r("span",{class:"back-link"},"< 返回首頁",-1)),ct={async asyncData(){const e=N();Object.keys(e.products).length===0&&(e.products=await $fetch(e.apiURL,{method:"GET",headers:{"Content-Type":"application/json"}}).then(async a=>await a.json()))},data(){return{toast:G()}},methods:{addToCart(e,a,i,t){if(i===0)return;if(a===-1&&t>0){this.toast.add({title:"請選擇選項",description:"請選擇一個選項",timeout:2500});return}const d=N();d.addToCart(e,a,Math.max(0,Math.floor(i))),d.resetCartCount(),this.toast.add({title:"成功加入購物車",description:`${i} 件 ${e}`+(a>=0?`（${d.getProducts[e].options[a].name}）`:""),timeout:2500})}},computed:{...K(N,["tmpOptionIndex"]),...K(N,["cartCount"])}},mt=R({...ct,__name:"[product]",async setup(e){let a,i;const t={primary:!0,rounded:!1},d=L(1),b=_e(),g=String(b.params.product),m=N();if(m.resetTmpObjectIndex(),m.tmpProductName=g,Object.keys(m.products).length===0){var B={};[a,i]=Ie(async()=>Ne("productsData",()=>$fetch(m.apiURL).then(async l=>{B=await l}))),a=await a,i(),m.products=B}const o=m.getProduct;return o||G().add({title:"找不到商品",description:"找不到這個商品",timeout:5e3}),(l,p)=>{const V=se,f=ke,C=Ve,j=De,M=Se;return u(),v("div",xe,[n(o)?(u(),v("div",Re,[r("div",We,[h(V,{src:n(o).image?n(o).image:"https://via.placeholder.com/150",alt:n(g)},null,8,["src","alt"])]),r("div",qe,[r("div",He,[r("span",null,S(n(g)),1)]),r("div",Ee,[r("span",{innerHTML:n(o).noted},null,8,Je)]),n(o).price?(u(),v("div",Ke,[n(o).price.max!==null?E((u(),v("span",Qe,[r("span",null,"NT $"+S(n(o).price.min),1),n(o).price.max>n(o).price.min?(u(),v("span",Xe,"-")):y("",!0),n(o).price.max>n(o).price.min?(u(),v("span",Ye,"NT $"+S(n(o).price.max),1)):y("",!0),n(o).price.ori?(u(),v("del",Ze,S(n(o).price.ori),1)):y("",!0)],512)),[[J,l.tmpOptionIndex==-1]]):y("",!0),n(o).price.max===null?(u(),v("span",Ge,[r("span",null,"NT $"+S(n(o).price.min),1),n(o).price.ori?(u(),v("del",Pe,S(n(o).price.ori),1)):y("",!0)])):y("",!0),n(o).price.max!==null&&l.tmpOptionIndex>=0?E((u(),v("span",et,[r("span",null,"NT $"+S(n(o).options[l.tmpOptionIndex].price),1)],512)),[[J,l.tmpOptionIndex!==-1]]):y("",!0)])):y("",!0),n(o).options.length>=2?(u(),v("div",tt,[(u(!0),v(Ce,null,ze(n(o).options,(z,k)=>(u(),$e(f,{color:l.tmpOptionIndex===k?"purple":"gray",variant:"outline",key:k,label:z.name,onClick:()=>{l.tmpOptionIndex=k},ui:{primary:l.tmpOptionIndex===k,secondary:l.tmpOptionIndex!==k,rounded:!1}},null,8,["color","label","onClick","ui"]))),128))])):y("",!0),r("div",nt,[h(j,{orientation:"horizontal",size:"md",ui:{rounded:!1}},{default:D(()=>[h(f,{color:"gray",variant:"solid",label:"-",onClick:p[0]||(p[0]=()=>{d.value=Math.max(0,Math.floor(n(d))-1)}),ui:t}),h(C,{color:"gray",variant:"outline",placeholder:"?",type:"number",modelValue:n(d),"onUpdate:modelValue":p[1]||(p[1]=z=>we(d)?d.value=z:null),ui:{rounded:!1,base:"text-center"}},null,8,["modelValue"]),h(f,{color:"gray",variant:"solid",label:"+",onClick:p[2]||(p[2]=()=>{d.value=Math.floor(n(d))+1}),ui:t})]),_:1}),r("div",at,[h(f,{color:"purple",size:"md",label:"加入購物車",onClick:p[3]||(p[3]=z=>l.addToCart(n(g),l.tmpOptionIndex,n(d),n(o).options.length))})])])]),r("div",ot,[h(M,{to:"/"},{default:D(()=>[lt]),_:1}),r("span",{innerHTML:n(o).description?n(o).description:""},null,8,it)])])):(u(),v("div",dt,[st,r("div",rt,[h(M,{to:"/"},{default:D(()=>[ut]),_:1})])]))])}}}),yt=Q(mt,[["__scopeId","data-v-ebc5756e"]]);export{yt as default};
